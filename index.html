<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <title>Twittler (Testing)</title>
  </head>
  <body>
    <header>      <!-- Hero Section -->
      <h1>Twittler</h1>
    </header>

    <navigation>  <!-- Navigation Section -->
      <button type='button' class="btn btn-primary refresh-tweets">Refresh</button>
    </navigation>

    <section class="live-tweets">     <!-- Tweet Section -->

    </section>

    <footer>      <!-- Footer & Credits Section -->

    </footer>

    <script>
      function getTweets(userTweets) {
        //var $body = $('body');
        var $body = $('.live-tweets');
        var index = userTweets.length - 1;
        var maxTweets = 0;
        $body.html('');

        while(index >= 0 && maxTweets < 50){
          //var tweet = streams.home[index];
          var tweet = userTweets[index];
          //var $tweet = $('<div></div>');
          var $tweet = $('<div><span class="user"></span><span class="user-message"></span></div>');

          //$tweet.text('@' + tweet.user + ': ' + tweet.message);
          $tweet.children('.user').text('@' + tweet.user);
          $tweet.children('.user-message').text(': ' + tweet.message);
          $tweet.appendTo($body);

          index -= 1;
          maxTweets++;
        }
      }

      $(document).ready(function(){
        getTweets(streams.home);

        $('.refresh-tweets').on('click', function() {
          getTweets(streams.home);
        });

        $('.live-tweets').on('click', '.user', function() {
          var currentUser = $(this).text().slice(1);
          console.log(currentUser);
          //userTweets(currentUser);
          getTweets(streams.users[currentUser])
        });
      });

    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </body>
</html>