<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- jQuery -->
    <script src="jquery.js"></script>

    <!-- Timeago.js for human-readable time -->
    <script src="jquery.timeago.js" type="text/javascript"></script>

    <!-- Hack Reactor provided script -->
    <script src="data_generator.js"></script>

    <!-- Normalize.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css" integrity="sha256-uHu2MAd1LvCOVEAhvMld4LpJi7dUGS7GVzvG/5B3hlo=" crossorigin="anonymous" />

    <!-- Bootstrap 4 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link rel="stylesheet" href="style.css">

    <title>Twittler. HRSF75</title>
  </head>

  <!-- HTML Body starts here -->
  <body>
    <div class="container">

      <!-- New Row Here --> 
      <div class="row"> 
        <div class="col col-sm-12 col-lg-3">

          <!-- Header Section -->
          <header>

            <h1 class="logo">Twittler.</h1>

          </header>

          <!-- Tagline Section -->
          <aside class="tagline"> 

            <p class="lead">A small web application.</p>

            <p class="text-muted" id="instructions">Twittler creates a fictional twitter-esque feed. To see an individual's timeline feed, click on their username.</p>

            <p class="text-muted" id="technologies">Twittler utilizes <a target="_blank" href="https://jquery.com/">jQuery</a>, <a target="_blank" href="http://timeago.yarp.com/">timeago.js</a>, <a target="_blank" href="https://necolas.github.io/normalize.css/">normalize.css</a>, and <a target="_blank" href="https://v4-alpha.getbootstrap.com/">Bootstrap 4</a>.</p>

          </aside>
          
          <!-- Refresh button -->
          <navigation> 

            <button type="button" class="btn btn-outline-primary btn-lg btn-refresh">New Tweets</button>

          </navigation>

        </div>

          <!-- Twitter Feed Section -->
          <article class="feed"> 
            <!-- See JavaScript below -->
          </article>
        
      </div>

    </div>

    <!-- Footer Section -->
    <footer class="footer footer-styling">
      <div class="container">

        <p class="text-muted">By <a target="_blank" href="https://github.com/JonEricEscobedo">Jon Eric Escobedo</a> for <a target="_blank" href="http://www.hackreactor.com/">Hack Reactor</a> SF #75. For educational purposes, only.</p>

      </div>
    </footer>

    <script>
      // Function to print tweets to screen
      function printTweets(userTweets) {
        var $body = $('.feed');
        var index = userTweets.length - 1;

        $body.html('');

        while(index >= 0){
          var tweet = userTweets[index]
          var $tweet = $('<div><span class="user"></span><span class="message"></span><span class="created text-muted"></span></div>')

          $tweet.children('.user').text('@' + tweet.user);
          $tweet.children('.message').text(' ' + tweet.message + ' ');
          $tweet.children('.created').text(jQuery.timeago(tweet.created_at));
          $tweet.appendTo($body);

          index -= 1;
        }
      }

      $(document).ready(function(){
        // Fire tweets on page load
        printTweets(streams.home);

        // Fire new tweets on refresh button click
        $('.btn-refresh').on('click', function(){
          printTweets(streams.home);
          $('.btn-refresh').text('New Tweets');
        });

        // Only show 'this' user's tweets on username click
        $('.feed').on('click', '.user', function() {
          var userName = $(this).text().slice(1);
          printTweets(streams.users[userName]);
          $('.btn-refresh').text('All Tweets');
        })

      });

    </script>
  </body>
</html>